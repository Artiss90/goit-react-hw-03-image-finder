{"version":3,"sources":["Components/Button/Button.module.css","Components/Loader/Loader.module.css","App.module.css","Components/Button/Button.jsx","Components/Searchbar/Searchbar.jsx","Components/ImageGallery/ImageGalleryItem/ImageGalleryItem.jsx","Components/ImageGallery/ImageGallery.jsx","Components/Modal/Modal.jsx","Components/Loader/Loader.jsx","services/fetchImages.js","App.jsx","index.js"],"names":["module","exports","Button","children","onClick","allyProps","type","className","style","defaultProps","Searchbar","state","query","notify","toast","info","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","handleSubmit","e","preventDefault","trim","props","onSubmitForm","resetState","handleChange","setState","currentTarget","value","onSubmit","this","autoComplete","autoFocus","placeholder","name","onChange","Component","ImageGalleryItem","image","src","alt","ImageGallery","handleShowLargeImage","imageUrl","list","map","index","id","webformatURL","largeImageURL","tags","modalRoot","document","querySelector","Modal","onCloseKeyEvent","toggleModal","code","onCloseOverlay","target","window","addEventListener","createPortal","removeEventListener","LoaderImage","center","color","height","width","axios","defaults","baseURL","fetchImages","querySearch","page","get","then","response","data","hits","App","largeImage","articles","onOpenModal","loading","error","getFetchImages","toggleLoading","catch","finally","getLargeImage","onSearch","getLoadMore","prevProps","prevState","scrollTo","top","documentElement","scrollHeight","behavior","app","Loader","onLoad","length","aria-label","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c6f37a59.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__21fyz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"center\":\"Loader_center__70YcQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1brDB\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './Button.module.css';\n/* eslint react/prop-types: 1 */\n\nconst Button = ({ children, onClick, ...allyProps }) => (\n  <button\n    type=\"button\"\n    className={style.Button}\n    onClick={onClick}\n    {...allyProps}\n  >\n    {children}\n  </button>\n);\n\nButton.defaultProps = {\n  onClick: () => null,\n  children: null,\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n  children: PropTypes.node,\n  'aria-label': PropTypes.string.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\n\n/* eslint react/prop-types: 1 */\n\nexport default class Searchbar extends Component {\n  static propTypes = {\n    onSubmitForm: PropTypes.func,\n  };\n\n  state = {\n    query: '',\n  };\n\n  notify = () =>\n    toast.info('поле не должно быть пустым', {\n      position: 'top-center',\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n    });\n  handleSubmit = e => {\n    e.preventDefault();\n    const { query } = this.state;\n    // console.log(e.target.elements.search.value);\n    query.trim() ? this.props.onSubmitForm(query) : this.notify();\n\n    this.resetState();\n  };\n\n  handleChange = e => {\n    this.setState({ query: e.currentTarget.value });\n  };\n\n  resetState = () => {\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            name=\"search\"\n            value={this.state.query}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n/* eslint react/prop-types: 1 */\n\nexport default class ImageGalleryItem extends Component {\n  static propTypes = {\n    image: PropTypes.string,\n    name: PropTypes.string,\n  };\n\n  render() {\n    const { image, name } = this.props;\n    return <img src={image} alt={name} className=\"ImageGalleryItem-image\" />;\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from './ImageGalleryItem/ImageGalleryItem';\n\n/* eslint react/prop-types: 1 */\n\nexport default class ImageGallery extends Component {\n  static propTypes = {\n    list: PropTypes.array,\n    onClick: PropTypes.func,\n  };\n\n  handleShowLargeImage = (imageUrl, name) => {\n    this.props.onClick({ src: imageUrl, name: name });\n  };\n\n  render() {\n    const { list } = this.props;\n    return (\n      <ul className=\"ImageGallery\">\n        {list &&\n          list.map(({ id, webformatURL, largeImageURL, tags }, index) => (\n            // ! в атрибут key поставил индекс вместо id, поскольку id на бекенде дублируются, массив статический - проблем не будет\n            <li\n              key={index}\n              className=\"ImageGalleryItem\"\n              onClick={() => this.handleShowLargeImage(largeImageURL, tags)}\n            >\n              <ImageGalleryItem image={webformatURL} name={tags} />\n            </li>\n          ))}\n      </ul>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\n/* eslint react/prop-types: 1 */\n\n// * используем портал\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  static propTypes = {\n    image: PropTypes.objectOf(PropTypes.string),\n    toggleModal: PropTypes.func,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.onCloseKeyEvent);\n  }\n\n  onCloseKeyEvent = e => {\n    const { toggleModal } = this.props;\n    if (e.code === 'Escape') {\n      toggleModal();\n    }\n  };\n\n  onCloseOverlay = e => {\n    const { toggleModal } = this.props;\n    if (e.target === e.currentTarget) {\n      toggleModal();\n    }\n  };\n\n  render() {\n    const { src, name } = this.props.image;\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.onCloseOverlay}>\n        <div className=\"Modal\">\n          <img src={src} alt={name} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onCloseKeyEvent);\n  }\n}\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\nimport style from './Loader.module.css';\n\nconst LoaderImage = () => {\n  return (\n    <Loader\n      className={style.center}\n      type=\"Circles\"\n      color=\"#00BFFF\"\n      height={100}\n      width={100}\n      // timeout={3000} //3 secs\n    />\n  );\n};\n\nexport default LoaderImage;\n","import axios from 'axios';\n/* eslint react/prop-types: 1 */\n\nconst KEY_API = '19207943-ecb2269b7818ebd0e732e1fe9';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst fetchImages = (querySearch, page) => {\n  return axios\n    .get(\n      `?image_type=photo&orientation=horizontal&q=${querySearch}&page=${page}&per_page=12&key=${KEY_API}`,\n    )\n    .then(response => response.data.hits);\n};\n\nexport default fetchImages;\n","import React, { Component } from 'react';\nimport Button from './Components/Button';\nimport Searchbar from './Components/Searchbar';\nimport ImageGallery from './Components/ImageGallery';\nimport Modal from 'Components/Modal';\nimport LoaderImage from 'Components/Loader';\nimport fetchImages from './services';\nimport { ToastContainer } from 'react-toastify';\nimport style from './App.module.css';\nimport 'react-toastify/dist/ReactToastify.css';\n\n/* eslint react/prop-types: 1 */\n\nclass App extends Component {\n  state = {\n    largeImage: null,\n    page: 1,\n    articles: [],\n    onOpenModal: false,\n    loading: false,\n    querySearch: '',\n    error: null,\n  };\n\n  componentDidMount() {}\n\n  componentDidUpdate(prevProps, prevState) {\n    const nextQuery = this.state.querySearch;\n    const prevQuery = prevState.querySearch;\n\n    if (nextQuery !== prevQuery) {\n      this.getFetchImages();\n    }\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  getFetchImages = () => {\n    const { querySearch, page, articles } = this.state;\n    // *включаем лоадер\n    this.toggleLoading();\n    fetchImages(querySearch, page)\n      .then(hits =>\n        this.setState({ articles: [...articles, ...hits], page: page + 1 }),\n      )\n      .catch(error => this.setState({ error }))\n      .finally(\n        // *выключаем лоадер\n        this.toggleLoading,\n      );\n  };\n\n  getLargeImage = image => {\n    this.setState({ largeImage: image });\n    this.toggleModal();\n  };\n\n  onSearch = query =>\n    this.setState({ querySearch: query, articles: [], page: 1 });\n\n  toggleLoading = () => {\n    this.setState(({ loading }) => ({\n      loading: !loading,\n    }));\n  };\n\n  toggleModal = () => {\n    this.setState(({ onOpenModal }) => ({\n      onOpenModal: !onOpenModal,\n    }));\n  };\n\n  getLoadMore = () => {\n    this.getFetchImages();\n  };\n\n  render() {\n    const { onOpenModal, articles, loading, largeImage } = this.state;\n    return (\n      <div className={style.app}>\n        <Searchbar onSubmitForm={this.onSearch}></Searchbar>\n        <ImageGallery\n          list={articles}\n          onClick={this.getLargeImage}\n        ></ImageGallery>\n        {loading && <LoaderImage onLoad={loading} />}\n        {articles.length > 0 && (\n          <Button onClick={this.getLoadMore} aria-label=\"Load more\">\n            Load more\n          </Button>\n        )}\n        {onOpenModal && (\n          <Modal image={largeImage} toggleModal={this.toggleModal} />\n        )}\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App.jsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}